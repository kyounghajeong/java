<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-
mapper.dtd">

<mapper namespace="com.spring.skyairmy.dao.SkyAirMapper">
	<resultMap type="com.spring.skyairmy.vo.SkyAirVO" id="SkyAirVO_A">		
		<result property="M_NAME" column="M_NAME" />
		<result property="M_ID" column="M_ID" />
		<result property="M_PW" column="M_PW" />
		<result property="M_TEL" column="M_TEL" />
		<result property="M_ADDR" column="M_ADDR" />
		<result property="M_DELETEYN" column="M_DELETEYN" />		
	</resultMap>
	<resultMap type="com.spring.skyairmy.vo.SkyAirVO" id="SkyAirVO_B">		
		<result property="username" column="M_NAME" />
		<result property="userid" column="M_ID" />
		<result property="userpass" column="M_PW" />
		<result property="usertel" column="M_TEL" />
		<result property="useraddr" column="M_ADDR" />					
	</resultMap>	
	<resultMap type="com.spring.skyairmy.vo.SkyAirVO" id="SkyAirVO_CK">		
		<result property="idcheck" column="M_ID" />							
	</resultMap>	
	<resultMap type="com.spring.skyairmy.vo.SkyAirVO" id="SkyAirVO_idfind">		
		<result property="username" column="M_NAME" />
		<result property="userid" column="M_ID" />
		<result property="usertel" column="M_TEL" />							
	</resultMap>
	
	<insert id="SkyAirsignup" parameterType="com.spring.skyairmy.vo.SkyAirVO" >
		/* Mapper - SkyAirsignup */			
			INSERT INTO MEMBER 
			( M_CODE, M_NAME, M_ID, M_PW, M_TEL, M_ADDR, M_DELETEYN) 
			VALUES
			( (SELECT NVL(MAX(M_CODE), 0) + 1 M_CODE FROM MEMBER), #{M_NAME}, #{M_ID}
			, #{M_PW}, #{M_TEL}, #{M_ADDR}, 'Y')
	</insert>
	
	<select id="SkyAirlogincheck" parameterType="com.spring.skyairmy.vo.SkyAirVO" resultMap="SkyAirVO_B">
		/* Mapper - SkyAirlogincheck */
			SELECT  M_NAME 
			,M_ID
			,M_PW		
			FROM MEMBER
			<where>
			<if test=" M_ID !=null and M_ID !='' ">
				M_ID like '%' || #{M_ID} || '%'
			</if>
			<if test=" M_PW !=null and M_PW !='' ">
				and M_PW like '%' || #{M_PW} || '%'
			</if>															
			</where>						
	</select>	
	<select id="SkyAirlogincheckB" parameterType="com.spring.skyairmy.vo.SkyAirVO" resultMap="SkyAirVO_B">
		/* Mapper - SkyAirlogincheckB */
			SELECT  M_NAME 
			,M_ID			
			FROM MEMBER
			WHERE M_DELETEYN = 'Y' 
			 <if test="M_ID != null and M_ID !=''">
        		AND M_PW = #{M_PW}
        		AND M_ID = #{M_ID}        			
 			</if>
	</select>
	<select id="SkyAirlogincheckA" parameterType="com.spring.skyairmy.vo.SkyAirVO" resultMap="SkyAirVO_B">
		/* Mapper - SkyAirlogincheckA */			 
			 SELECT 
			 		M_NAME
			 		,M_ID
			 		,M_PW
			 		,M_TEL
			 		,M_ADDR
			 FROM MEMBER
			 WHERE M_PW = #{M_PW}
			 AND M_ID = #{M_ID}
			 AND M_DELETEYN = Y
	</select>
	
	<select id="SkyAirsignupidcheck" parameterType="com.spring.skyairmy.vo.SkyAirVO"  resultType="java.lang.Integer">
		/* Mapper - SkyAirsignupidcheck */			 
			 SELECT 
			 		COUNT(*) 			 		
			 		M_ID			 	 		
			 FROM MEMBER
				 <if test="M_ID != null and M_ID !=''">
					 WHERE M_ID = #{M_ID} 
				 </if>
	</select>
	
	<select id="SkyAiridfindsand" parameterType="com.spring.skyairmy.vo.SkyAirVO"  resultMap="SkyAirVO_idfind">
		/* Mapper - SkyAiridfindsand */			 
			 SELECT 
			 		M_NAME
			 		,M_ID
			 		,M_TEL		 	 		
			 FROM MEMBER
			 WHERE M_DELETEYN = 'Y' 
			 <if test="M_NAME != null and M_NAME !=''">
        		AND M_NAME = #{M_NAME}
        		AND M_TEL = #{M_TEL}        			
 			</if>
	</select>
</mapper>